const y={dropBox:null,limited:!0},v=(t,e)=>{const{paddingTop:n,paddingLeft:i,paddingRight:o,paddingBottom:s}=getComputedStyle(t),d=/[0-9]*/ig;e.offsetLeft<=Number(i.match(d)?.[0])&&(e.style.left=`${Number(i.match(d)?.[0])}px`),e.offsetTop<=Number(n.match(d)?.[0])&&(e.style.top=`${Number(n.match(d)?.[0])}px`),e.offsetTop+e.offsetHeight>=t.offsetHeight-Number(s.match(d)?.[0])&&(e.style.top=`${t.offsetHeight-e.offsetHeight-Number(s.match(d)?.[0])}px`),e.offsetLeft+e.offsetWidth>=t.offsetWidth-Number(o.match(d)?.[0])&&(e.style.left=`${t.offsetWidth-e.offsetWidth-Number(o.match(d)?.[0])}px`)},g=(t,e,n,i)=>{const o=document.createElement("div");o.style.position="absolute",o.style.opacity="0",o.style.height="100%",o.style.width="100%",o.style.zIndex="9999",o.style.top="0",o.style.left="0",o.style.right="0",o.style.cursor="move";const s={x:e.offsetLeft,y:e.offsetTop};o.addEventListener("mouseup",()=>{t?.removeChild(o)}),o.addEventListener("mouseout",()=>{t?.removeChild(o)}),o.addEventListener("mouseleave",()=>{t?.removeChild(o)}),o.addEventListener("mousemove",d=>{e.style.left=`${s.x+d.offsetX-n.x}px`,e.style.top=`${s.y+d.offsetY-n.y}px`,i&&v(t,e)}),t.appendChild(o)},b={mounted(t,e){t.draggable=!0;const n={...y,...e.value},i=n?.dropBox||t.parentElement,{limited:o}=n;i.style.position="relative",t.style.position="absolute",t.addEventListener("mousedown",s=>{g(i,t,{x:t.offsetLeft+s.offsetX,y:t.offsetTop+s.offsetY},o)})}},x={mode:["right","bottom","diagonal"],content:document.getElementsByTagName("body")[0],overLay:!0,limited:!0},C=()=>{const t=document.createElement("div");return t.style.position="absolute",t.style.width="4px",t.style.height="100%",t.style.cursor="e-resize",t.style.zIndex="999",t.style.right="0px",t.className="hover-active",t},w=()=>{const t=document.createElement("div");return t.style.position="absolute",t.style.width="100%",t.style.height="4px",t.style.cursor="n-resize",t.style.zIndex="999",t.style.bottom="0px",t.className="hover-active",t},$=()=>{const t=document.createElement("div");return t.style.position="absolute",t.style.width="12px",t.style.height="12px",t.style.cursor="nw-resize",t.style.zIndex="9998",t.style.bottom="0px",t.style.right="0px",t.style.opacity="0",t},E=(t,e,n,i)=>{if(e?.includes("right")){const o=C();o.addEventListener("mousedown",s=>{s.stopPropagation();const d=u(n,o,t,{mode:"width",startPos:{x:s.clientX,y:0}},i);return o.className="hover-active resize-active",n?.appendChild(d),!1}),t.appendChild(o)}if(e?.includes("bottom")){const o=w();o.addEventListener("mousedown",s=>{s.stopPropagation();const d=u(n,o,t,{mode:"height",startPos:{y:s.clientY,x:0}},i);return o.className="hover-active resize-active",n?.appendChild(d),!1}),t.appendChild(o)}if(e?.includes("diagonal")){const o=$();return o.addEventListener("mousedown",s=>{s.stopPropagation();const d=u(n,o,t,{mode:"diagonal",startPos:{x:s.clientX,y:s.clientY}},i);n?.appendChild(d)}),t.appendChild(o),!1}},L=(t,e)=>{const{paddingRight:n,paddingBottom:i}=getComputedStyle(t),o=/[0-9]*/ig;e.offsetLeft+e.offsetWidth>=t.offsetWidth-Number(n.match(o)?.[0])&&(e.style.width=`${t.offsetWidth-e.offsetLeft-Number(n.match(o)?.[0])}px`),e.offsetTop+e.offsetHeight>=t.offsetHeight-Number(i.match(o)?.[0])&&(e.style.height=`${t.offsetHeight-e.offsetTop-Number(i.match(o)?.[0])}px`)},u=(t,e,n,i,o)=>{const s=document.createElement("div");s.style.position="fixed",s.style.opacity="0",s.style.height="100vh",s.style.width="100vw",s.style.zIndex="9999",s.style.top="0",s.style.left="0",s.style.right="0",s.addEventListener("mouseup",()=>{t?.removeChild(s),e.className="hover-active"}),s.addEventListener("mouseout",()=>{t?.removeChild(s),e.className="hover-active"}),s.addEventListener("mouseleave",()=>{t?.removeChild(s),e.className="hover-active"});const d=n.clientWidth,l=n.clientHeight;return s.addEventListener("mousemove",r=>{i.mode==="width"?n.style.width=`${d+r.clientX-i.startPos.x}px`:i.mode==="height"?n.style.height=`${l+r.clientY-i.startPos.y}px`:i.mode==="diagonal"&&(n.style.width=`${d+r.clientX-i.startPos.x}px`,n.style.height=`${l+r.clientY-i.startPos.y}px`),o&&L(n.parentElement,n)}),s},N={mounted(t,e){t.style.position||(t.style.position="relative");const n={...x,...e.value},{mode:i,limited:o}=n,s=n.content;E(t,i,s,o)}},h={button:{marginRight:"0.5rem",fontSize:"0.5rem",backgroundColor:"#5667be",border:"none",outline:"none",color:"white",height:"1.5rem",cursor:"pointer",borderRadius:"3px"},content:{position:"fixed",zIndex:"99999",padding:"0.5rem",textAlign:"center",backgroundColor:"white",maxWidth:"200px",minWidth:"150px",borderRadius:"5px",wordWrap:"break-word"}},R=t=>{const{top:e,left:n,height:i,width:o}=t.getBoundingClientRect();return{top:e,left:n,height:i,width:o}},z=(t,e)=>{const n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");[n,i,o,s].forEach(l=>{l.style.position="fixed",l.style.zIndex="9999",l.style.backgroundColor="rgba(0,0,0,0.2)",l.className=`vue-directive-step-cover-${e}`}),n.style.height="100%",n.style.width=`${t.left}px`,n.style.top="0",n.style.left="0",i.style.height=`${t.top}px`,i.style.top="0",i.style.left=`${t.left}px`,i.style.width=`${t.width}px`,o.style.height="100%",o.style.width=`${document.documentElement.clientWidth-t.left-t.width}px`,o.style.top="0",o.style.right="0",s.style.height=`${document.documentElement.clientHeight-t.top-t.height}px`,s.style.width=`${t.width}px`,s.style.left=`${t.left}px`,s.style.bottom="0",document.body.appendChild(n),document.body.appendChild(i),document.body.appendChild(o),document.body.appendChild(s)},T=(t,e,n,i)=>{i==="bottom"?(t.style.left=`${e.left+e.width/2-n.width/2}px`,t.style.top=`${e.top+e.height+10}px`):i==="top"?(t.style.left=`${e.left+e.width/2-n.width/2}px`,t.style.top=`${e.top-n.height-10}px`):i==="left"?(t.style.left=`${e.left-n.width-10}px`,t.style.top=`${e.top+e.height/2-n.height/2}px`):i==="right"?(t.style.left=`${e.left+e.width+10}px`,t.style.top=`${e.top+e.height/2-n.height/2}px`):(t.style.left=`${e.left+e.width/2-n.width/2}px`,t.style.top=`${e.top+e.height+10}px`)},H=({step:t,text:e,posMsg:n,position:i},o,s)=>{const d=document.createElement("div"),l=document.createElement("button"),r=document.createElement("button"),c=document.createElement("div");l.innerHTML="\u8DF3\u8FC7\u6B65\u9AA4",r.innerHTML="\u4E0B\u4E00\u6B65",Object.keys(h.button).forEach(a=>{l.style[a]=h.button[a],r.style[a]=h.button[a]}),r.addEventListener("click",()=>{o()}),l.addEventListener("click",()=>{s()}),c.style.display="flex",c.style.justifyContent="space-around",c.style.marginTop="0.5rem",c.appendChild(l),c.appendChild(r),d.innerHTML=e+t,Object.keys(h.content).forEach(a=>{d.style[a]=h.content[a]}),d.className=`vue-directive-step-tips-${t}`,d.appendChild(c),document.body.appendChild(d);const f=d.getBoundingClientRect();T(d,n,f,i)},m=t=>{const e=document.getElementsByClassName(`vue-directive-step-cover-${t}`),n=document.getElementsByClassName(`vue-directive-step-tips-${t}`);for(;e.length!==0;)document.body.removeChild(e[0]);for(;n.length!==0;)document.body.removeChild(n[0])},p=(t,e,n)=>{const{trigger:i,step:o,currentStep:s,position:d,text:l,next:r,jumpAll:c}=e.value;if(!i){n&&m(o);return}if(o!==s){n&&m(o);return}const f=R(t);z(f,o),H({step:o,text:l,posMsg:f,position:d},r,c)},W={mounted(t,e){p(t,e,!1)},updated(t,e){p(t,e,!0)}};export{b as vDrag,N as vResize,W as vStep};
